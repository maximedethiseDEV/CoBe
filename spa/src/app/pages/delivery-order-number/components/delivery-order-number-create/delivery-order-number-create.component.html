<app-header-form [iconHeader]="iconHeader" [labelHeader]="labelHeader"/>

<div class="mt-6 flex-1">
  <form [formGroup]="form" (ngSubmit)="create()">
    <div class="border border-slate-200 divide-y divide-slate-200 rounded-none">
      <app-section-fom [sectionForm]="sections.number">
        <ng-container slot="content">
          <label for="uniqueDeliveryOrderNumber" class="block text-sm font-medium text-slate-700">
            Num√©ro de chargement <span class="text-indigo-600">*</span>
          </label>
          <input
            id="uniqueDeliveryOrderNumber"
            type="text"
            formControlName="uniqueDeliveryOrderNumber"
            class="mt-1 block w-full bg-white px-3 py-2 text-sm text-slate-900 border border-slate-300 outline-none focus:ring-4 focus:ring-indigo-200 focus:border-indigo-400 transition"
          >
        </ng-container>
      </app-section-fom>

      <app-section-fom [sectionForm]="sections.transport">
        <ng-container slot="content">
          <label for="transportSupplier" class="block text-sm font-medium text-slate-700">
            Transporteur <span class="text-indigo-600">*</span>
          </label>
          <select
            id="transportSupplier"
            formControlName="transportSupplierId"
            class="mt-1 block w-full bg-white px-3 py-2 text-sm text-slate-900 border border-slate-300 outline-none focus:ring-4 focus:ring-indigo-200 focus:border-indigo-400 transition"
          >
            <option [ngValue]="null"></option>
            @for (transportSupplier of transportSuppliers(); track transportSupplier.id) {
              <option [ngValue]="transportSupplier.id">
                {{ transportSupplier.companyName }} {{ transportSupplier.cityName }} ({{ transportSupplier.postalCode }}) - {{ transportSupplier.countryCode }}
              </option>
            }
          </select>
        </ng-container>
      </app-section-fom>

      <app-section-fom [sectionForm]="sections.customer">
        <ng-container slot="content">
          <label for="customer" class="block text-sm font-medium text-slate-700">
            Client <span class="text-indigo-600">*</span>
          </label>
          <select
            id="customer"
            formControlName="customerId"
            class="mt-1 block w-full bg-white px-3 py-2 text-sm text-slate-900 border border-slate-300 outline-none focus:ring-4 focus:ring-indigo-200 focus:border-indigo-400 transition"
          >
            <option [ngValue]="null"></option>
            @for (customer of customers(); track customer.id) {
              <option [ngValue]="customer.id">
                {{ customer.companyName }} {{ customer.cityName }} ({{ customer.postalCode }}) - {{ customer.countryCode }}
              </option>
            }
          </select>
        </ng-container>
      </app-section-fom>

      <app-section-fom [sectionForm]="sections.city">
        <ng-container slot="content">
          <label for="city" class="block text-sm font-medium text-slate-700">
            Ville <span class="text-indigo-600">*</span>
          </label>
          <select
            id="city"
            formControlName="cityId"
            class="mt-1 block w-full bg-white px-3 py-2 text-sm text-slate-900 border border-slate-300 outline-none focus:ring-4 focus:ring-indigo-200 focus:border-indigo-400 transition"
          >
            <option [ngValue]="null"></option>
            @for (city of cities(); track city.id) {
              <option [ngValue]="city.id">
                {{ city.cityName }} ({{ city.postalCode }}) - {{ city.countryCode }}
              </option>
            }
          </select>
        </ng-container>
      </app-section-fom>

      <app-section-fom [sectionForm]="sections.product">
        <ng-container slot="content">
          <label for="product" class="block text-sm font-medium text-slate-700">
            Produit <span class="text-indigo-600">*</span>
          </label>
          <select
            id="product"
            formControlName="productId"
            class="mt-1 block w-full bg-white px-3 py-2 text-sm text-slate-900 border border-slate-300 outline-none focus:ring-4 focus:ring-indigo-200 focus:border-indigo-400 transition"
          >
            <option [ngValue]="null"></option>
            @for (product of products(); track product.id) {
              <option [ngValue]="product.id">
                {{ product.codeAS400 }} - {{ product.nameShort }}
              </option>
            }
          </select>
        </ng-container>
      </app-section-fom>
    </div>

    <div class="mt-4 flex justify-end">
      <app-submit-button [disabled]="form.invalid"/>
    </div>
  </form>
</div>
