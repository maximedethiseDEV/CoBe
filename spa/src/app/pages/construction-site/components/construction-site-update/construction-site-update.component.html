<app-header-form [iconHeader]="iconHeader" [labelHeader]="labelHeader"/>

<div class="mt-6 flex-1">
    <form
        [formGroup]="form"
        (ngSubmit)="update()"
    >
        <div class="space-y-4">
            <div class="grid grid-cols-3 gap-4">
                <label for="customers" class="block text-sm font-medium text-gray-700">
                    Client
                </label>
                <select
                    id="customers"
                    formControlName="customerId"
                    class="mt-1 block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 outline-gray-300 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                >
                    @for (customer of customers(); track customer.id) {
                        <option [ngValue]="customer.id">
                            {{ customer.companyName }} {{ customer.cityName }} ({{ customer.postalCode }})
                            - {{ customer.countryCode }}
                        </option>
                    }
                </select>
            </div>

            <div class="grid grid-cols-3 gap-4">
                <label for="address" class="block text-sm font-medium text-gray-700">
                    Adresse de livraison
                </label>
                <select
                    id="address"
                    formControlName="addressId"
                    class="mt-1 block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 outline-gray-300 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                >
                    @for (address of addresses(); track address.id) {
                        <option [ngValue]="address.id">
                            {{ address.cityName }} ({{ address.postalCode }}) - {{ address.countryCode }}
                        </option>
                    }
                </select>
            </div>

            <div class="grid grid-cols-3 gap-4">
                <label for="contact" class="block text-sm font-medium text-gray-700">
                    Contact
                </label>
                <select
                    id="contact"
                    formControlName="contactId"
                    class="mt-1 block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 outline-gray-300 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                >
                    <option [ngValue]=""></option>
                    @for (contact of contacts(); track contact.id) {
                        <option [ngValue]="contact.id">
                            {{ contact.firstName }} {{ contact.lastName }} [{{ contact.role }}]
                        </option>
                    }
                </select>
            </div>

            <div class="grid grid-cols-3 gap-4">
                <label for="sharedDetail" class="block text-sm font-medium text-gray-700">
                    DÃ©tails
                </label>
                <select
                    id="sharedDetail"
                    formControlName="sharedDetailsId"
                    class="mt-1 block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 outline-gray-300 border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                >
                    <option [ngValue]=""></option>
                    @for (sharedDetail of sharedDetails(); track sharedDetail.id) {
                        <option [ngValue]="sharedDetail.id">
                            {{ sharedDetail.fileName }} {{ sharedDetail.notes }}
                        </option>
                    }
                </select>
            </div>
        </div>

        <div class="flex justify-end">
            <app-submit-button [disabled]="form.invalid"/>
        </div>
    </form>
</div>
